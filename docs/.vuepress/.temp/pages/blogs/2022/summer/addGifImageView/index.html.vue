<template><div><h2 id="前言" tabindex="-1"><a class="header-anchor" href="#前言" aria-hidden="true">#</a> 前言</h2>
<ul>
<li>使用第三方库实现gif背景播放 https://libraries.io/maven/pl.droidsonroids.gif:android-gif-drawable</li>
<li>使用工具： mt管理器 2.11.3</li>
<li>需要用到的文件： https://pan.baidu.com/s/1hHKe943jfTkYc4yPFxwO2w?pwd=c7ix</li>
</ul>
<h2 id="引入" tabindex="-1"><a class="header-anchor" href="#引入" aria-hidden="true">#</a> 引入</h2>
<ol>
<li>用dex编辑器++打开dex，长按任意包名，导入smali.zip，选择导入到根目录。</li>
<li>将libpl_droidsonroids_gif.so放入apk/lib/armeabi-v7a中。</li>
</ol>
<h2 id="添加布局" tabindex="-1"><a class="header-anchor" href="#添加布局" aria-hidden="true">#</a> 添加布局</h2>
<ol>
<li>将需要显示的gif图片放入apk/res/drawable中，重命名为gif_bg.gif。</li>
<li>用arsc编辑器++打开resources.arsc
<ul>
<li>打开drawable/drawable，在末尾复制上面一行的path，并将name改成<code v-pre>gif_bg</code>，里面的路径改为<code v-pre>res/drawable/gif_bg.gif</code>；</li>
<li>打开drawable/type-info，复制一行上面的entry，并将id值+1，name改为<code v-pre>gif_bg</code>。</li>
</ul>
</li>
<li>在apk/res/layout中找到exagear主界面布局ed_main.xml，在其中找个合适的位置插入gif布局，我这里插入到了android.support.v7.widget.Toolbar的下面。<br>
将background设置为刚才在drawable/type-info中name填的字符串，高度宽度可以自己设置，下面那两个是设置居中。<div class="language-xml ext-xml line-numbers-mode"><pre v-pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pl.droidsonroids.gif.GifImageView</span>
    <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/gif_bg<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>72dp<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_alignParentTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_centerHorizontal</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
</ol>
<p>确保dex，arsc，xml都编译通过，签名apk后安装打开，如果不闪退的话，那么此时gif应该显示了。如下图。<br>
<img src="@source/blogs/2022/summer/addGifImageView/2.gif" alt="图2"></p>
</div></template>
