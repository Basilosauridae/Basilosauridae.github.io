---
title: Vue2核心源码解析
date: 2024-03-08
tags:
  - sourceCode
categories:
  - Vue
---

## Flow

> 一种静态检查工具，工作中不会用到，类似于Typescript。[Flow](https://flow.org/en/docs/getting-started/)

了解选择flow的原因，为什么Vue3完全拥抱TypeScript?

## 如何阅读大型的开源项目源码

### 思路

1. 了解核心流程API，把库的API用熟（顺藤摸瓜）
2. 整体执行流程，（lodash、underscore等工具库除外,无太多学习参考意义），如：
  - webpack/vite/gulp：从启动到打包输出的流程
  - Vue2：Vue2从编译 => 初始化 => 触发更新 => 卸载的流程
3. 看package.json，看依赖和命令

### Vue的目录结构设计

补充script下文件夹名。

core/observer 响应式部分，dep.ts侦听依赖内容，scheduler.ts调度
core/instance 生命周期、proxy、初始化挂载等
core/vdom 虚拟dom等

compiler 编译比较复杂，后期会在webpack/babel中总结parser
vue2中是通过正则方式实现，vue3更加严谨：通过状态机制来做tokens的解析，词法语法分析；
compiler/parser转换 => compiler/directive AST解析 => compiler/codergen 生成；
完整的编译过程：将代码转成 => AST => 目标AST => 生成代码

platform 多端适配处理，非重点

shared 定义生命周期的hooks等

### 根据执行过程分析源码

九步补充
1. 
[AST Explorer](https://astexplorer.net/)
packages/compiler-sfc/src, `compileScript、compileTemplate、compileStyle`方法解析


<!-- ## 组件化实现的原理

## 编译实现

## 响应式对象的创建、依赖收集、派发更新的实现过程

## 常用功能的原理实现

## 深入理解响应式设计 -->

